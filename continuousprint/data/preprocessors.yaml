Preprocessors:
  - name: "If the bed temperature is >40C"
    version: 0.0.1
    body: |
      bed_temp > 40
  - name: "If print filename ends in \"_special.gcode\""
    version: 0.0.1
    body: |
      path.endswith("_special.gcode")
  - name: "If print will be at least 10mm high"
    body: |
      metadata["analysis"]["dimensions"]["height"] >= 10
  - name: "If print takes on average over an hour to complete"
    body: |
      ["statistics"]["averagePrintTime"]["_default"] > 60*60
  - name: "If print has failed more than 10% of the time"
    body: |
      # Div by 1 when history is empty to prevent divide by zero
      failure_ratio = len([h for h in metadata["history"] if not h['success']]) / max(1, len(metadata["history"]))
      False if len(metadata["history"]) == 0 else failure_ratio > 0.1
